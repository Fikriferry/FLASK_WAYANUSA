<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mengenal Budaya Wayang Kulit Mahabarata</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-content">
                <div class="navbar-logo">
                    <a href="/" class="logo-link">
                        <img src="{{ url_for('static', filename='images/logo.png') }}" alt="WAYANUSA Logo" class="logo-image">
                    </a>
                </div>
                <div class="navbar-menu">
                    <ul class="nav-links">
                        <li><a href="{{ url_for('pengenalan_wayang') }}">Pengenalan Wayang</a></li>
                        <li><a href="{{ url_for('quiz') }}">Quiz</a></li>
                        <li><a href="{{ url_for('mencari_dalang') }}">Mencari Dalang</a></li>
                        <li><a href="{{ url_for('pertunjukan_wayang') }}">Pertunjukan Wayang</a></li>
                    </ul>
                </div>
                <div class="navbar-actions">
                    {% if session.get('user_logged_in') %}
                        <span class="user-greeting">Halo, {{ session.get('user_name', 'User') }}!</span>
                        <a href="{{ url_for('logout_user') }}" class="btn-login">Logout</a>
                    {% else %}
                        <a href="{{ url_for('login_user') }}" class="btn-login">Login</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </nav>
    <main class="hero">
        <div class="container">
            <div class="hero-content">
                <div class="hero-text">
                    <p class="hero-tag">‚ú® Melestarikan Budaya Nusantara</p>
                    <h1 class="hero-title">
                        Mengenal Budaya <span class="highlight">Wayang Kulit</span> Mahabarata <span class="highlight"></span>
                    </h1>
                    <p class="hero-description">
                        Belajar, bermain, dan melestarikan budaya Indonesia melalui pengalaman digital interaktif yang menawan dan penuh makna.
                    </p>
                    <div class="hero-buttons">
                        <a href="#" class="btn btn-primary">‚¨á Unduh Sekarang</a>
                        <a href="#" class="btn btn-secondary">Pelajari Lebih Lanjut ‚Üí</a>
                    </div>
                </div>
                <div class="hero-image">
                    <img src="{{ url_for('static', filename='images/banner.jpg') }}" alt="Siluet Wayang Kulit" class="wayang-image">
                </div>
            </div>
        </div>
    </main>

    <!-- About Section -->
    <section class="about">
        <div class="container">
            <div class="about-content">
                <p class="about-tag">TENTANG WAYANUSA</p>
                <h2 class="about-title">Cara Baru Mengenal <span class="highlight">Budaya Wayang</span></h2>
                <p class="about-description">
                    WAYANUSA adalah aplikasi edukatif berbasis mobile yang menghadirkan cara baru untuk mengenal budaya wayang kulit. Melalui fitur pengenalan wayang, kuis interaktif, pencarian dalang, hingga simulasi menjadi dalang, WAYANUSA berkomitmen melestarikan budaya nusantara di era digital.
                </p>
                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-number">6+</div>
                        <div class="stat-label">Fitur Interaktif</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">100+</div>
                        <div class="stat-label">Tokoh Wayang</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">50+</div>
                        <div class="stat-label">Video Edukatif</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features">
        <div class="container">
            <div class="features-content">
                <p class="features-tag">FITUR UTAMA</p>
                <h2 class="features-title">Eksplorasi Budaya Wayang dengan <span class="highlight">Teknologi Modern</span></h2>
                <p class="features-description">
                    Setiap fitur dirancang dengan tujuan edukatif untuk melestarikan dan mempertemukan kekayaan budaya Indonesia.
                </p>
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-image">
                            <img src="https://via.placeholder.com/400x250/2a2a2a/ffd700?text=Pengenalan+Wayang" alt="Pengenalan Wayang">
                        </div>
                        <div class="feature-content">
                            <h3 class="feature-title">Pengenalan Wayang</h3>
                            <div class="feature-badge">ü§ñ AI Image Recognition</div>
                            <p class="feature-description">
                                Menggunakan teknologi AI untuk mengenali tokoh wayang dari foto atau kamera pengguna.
                            </p>
                            <div class="feature-details">
                                <p><strong>Tujuan:</strong> Mempermudah pengguna mempelajari nama, sifat, dan kisah di balik setiap karakter wayang.</p>
                                <p><strong>Nilai Edukatif:</strong> Menumbuhkan rasa ingin tahu dan apresiasi terhadap seni dan filsafat wayang.</p>
                            </div>
                        </div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-image">
                            <img src="https://via.placeholder.com/400x250/2a2a2a/ffd700?text=Kuis+Edukatif" alt="Kuis Edukatif">
                        </div>
                        <div class="feature-content">
                            <h3 class="feature-title">Kuis Edukatif</h3>
                            <div class="feature-badge">üéÆ Gamifikasi Pembelajaran</div>
                            <p class="feature-description">
                                Mini game berbentuk kuis tentang cerita, filsafat, dan karakter wayang dengan sistem poin dan badge.
                            </p>
                            <div class="feature-details">
                                <p><strong>Tujuan:</strong> Membuat proses belajar budaya menjadi seru dan kompetitif.</p>
                                <p><strong>Nilai Edukatif:</strong> Mengasah ingatan dan menambah wawasan budaya Jawa dengan cara menyenangkan.</p>
                            </div>
                        </div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-image">
                            <img src="https://via.placeholder.com/400x250/2a2a2a/ffd700?text=Mencari+Dalang" alt="Mencari Dalang">
                        </div>
                        <div class="feature-content">
                            <h3 class="feature-title">Mencari Dalang</h3>
                            <div class="feature-badge">üìç Lokasi Berbasis Komunitas</div>
                            <p class="feature-description">
                                Menampilkan daftar dalang atau sanggar wayang terdekat, lengkap dengan profil dan jadwal pementasan.
                            </p>
                            <div class="feature-details">
                                <p><strong>Tujuan:</strong> Menghubungkan masyarakat dengan pelaku seni tradisional.</p>
                                <p><strong>Nilai Edukatif:</strong> Mendorong interaksi langsung antara pengguna dan komunitas budaya lokal.</p>
                                <div class="dalang-list-section">
                                    <h4>Dalang Tersedia:</h4>
                                    {% if dalangs %}
                                        <div class="dalang-grid">
                                            {% for dalang in dalangs %}
                                            <div class="dalang-card">
                                                {% if dalang.foto %}
                                                    <img src="{{ url_for('static', filename='uploads/' + dalang.foto) }}" alt="Foto {{ dalang.nama }}" class="dalang-photo">
                                                {% else %}
                                                    <img src="https://via.placeholder.com/150x150/2a2a2a/ffd700?text=No+Photo" alt="No Photo" class="dalang-photo">
                                                {% endif %}
                                                <div class="dalang-info">
                                                    <h4>{{ dalang.nama }}</h4>
                                                    <p><strong>Alamat:</strong> {{ dalang.alamat }}</p>
                                                    {% if dalang.latitude and dalang.longitude %}
                                                        <p><strong>Koordinat:</strong> {{ dalang.latitude }}, {{ dalang.longitude }}</p>
                                                    {% endif %}
                                                </div>
                                            </div>
                                            {% endfor %}
                                        </div>
                                    {% else %}
                                        <p>Belum ada dalang yang terdaftar.</p>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-image">
                            <img src="https://via.placeholder.com/400x250/2a2a2a/ffd700?text=Simulasi+Dalang" alt="Simulasi Dalang">
                        </div>
                        <div class="feature-content">
                            <h3 class="feature-title">Simulasi Dalang</h3>
                            <div class="feature-badge">üé≠ Mode Interaktif</div>
                            <p class="feature-description">
                                Memberikan pengalaman pengguna menjadi dalang virtual dengan gerak, suara, dan narasi.
                            </p>
                            <div class="feature-details">
                                <p><strong>Tujuan:</strong> Memberikan pengalaman digital yang imersif.</p>
                                <p><strong>Nilai Edukatif:</strong> Menanamkan kecintaan terhadap seni pertunjukan tradisional.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Dalang List Section -->
    <section class="dalang-showcase">
        <div class="container">
            <div class="dalang-showcase-content">
                <p class="dalang-showcase-tag">DALANG TERSEDIA</p>
                <h2 class="dalang-showcase-title">Temukan <span class="highlight">Dalang</span> Terdekat</h2>
                <p class="dalang-showcase-description">
                    Jelajahi daftar lengkap dalang dan sanggar wayang yang telah terdaftar di platform WAYANUSA. Temukan profil lengkap, lokasi, dan informasi kontak untuk pengalaman budaya yang autentik.
                </p>
                <div class="dalang-list-section">
                    {% if dalangs %}
                        <div class="dalang-grid">
                            {% for dalang in dalangs %}
                            <div class="dalang-card">
                                {% if dalang.foto %}
                                    <img src="{{ url_for('static', filename='uploads/' + dalang.foto) }}" alt="Foto {{ dalang.nama }}" class="dalang-photo">
                                {% else %}
                                    <img src="https://via.placeholder.com/150x150/2a2a2a/ffd700?text=No+Photo" alt="No Photo" class="dalang-photo">
                                {% endif %}
                                <div class="dalang-info">
                                    <h4>{{ dalang.nama }}</h4>
                                    <p><strong>Alamat:</strong> {{ dalang.alamat }}</p>
                                    {% if dalang.latitude and dalang.longitude %}
                                        <p><strong>Koordinat:</strong> {{ dalang.latitude }}, {{ dalang.longitude }}</p>
                                    {% endif %}
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <p>Belum ada dalang yang terdaftar.</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </section>

    <!-- Chatbot Button -->
    <div class="chatbot-button" id="chatbotButton">
        <img src="{{ url_for('static', filename='images/icon_robot.png') }}" alt="Chatbot" class="chatbot-icon">
    </div>

    <!-- Chat Popup -->
    <div class="chat-popup" id="chatPopup">
        <div class="chat-popup-header">
            <h3>Chatbot WAYANUSA</h3>
            <button class="chat-close" id="chatClose">&times;</button>
        </div>
        <div class="chat-messages" id="chatMessages">
            <div class="message bot-message">
                <p>üëã Halo! Ada yang bisa saya bantu?</p>
            </div>
        </div>
        <div class="chat-input-area">
            <input type="text" id="chatInput" placeholder="Ketik pesan Anda..." maxlength="500">
            <button id="sendButton">Kirim</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const chatbotButton = document.getElementById('chatbotButton');
            const chatPopup = document.getElementById('chatPopup');
            const chatClose = document.getElementById('chatClose');
            const chatInput = document.getElementById('chatInput');
            const sendButton = document.getElementById('sendButton');
            const chatMessages = document.getElementById('chatMessages');

            // Toggle popup saat klik tombol
            chatbotButton.addEventListener('click', function() {
                // Check if user is logged in before opening popup
                if (!{{ session.get('user_logged_in', False)|tojson }}) {
                    alert('Silakan login terlebih dahulu untuk menggunakan fitur chatbot.');
                    window.location.href = '{{ url_for("login_user") }}';
                    return;
                }

                chatPopup.classList.toggle('show');
                if (chatPopup.classList.contains('show')) {
                    chatInput.focus();
                }
            });

            // Tutup popup saat klik tombol close
            chatClose.addEventListener('click', function() {
                chatPopup.classList.remove('show');
            });

            // Tutup popup saat klik di luar popup
            document.addEventListener('click', function(event) {
                if (!chatbotButton.contains(event.target) && !chatPopup.contains(event.target)) {
                    chatPopup.classList.remove('show');
                }
            });

            // Fungsi untuk mengirim pesan
            function sendMessage() {
                // Check if user is logged in before proceeding
                if (!{{ session.get('user_logged_in', False)|tojson }}) {
                    alert('Silakan login terlebih dahulu untuk menggunakan fitur chatbot.');
                    chatPopup.classList.remove('show');
                    window.location.href = '{{ url_for("login_user") }}';
                    return;
                }

                const message = chatInput.value.trim();
                if (message === '') return;

                // Tambah pesan user
                const userMessageDiv = document.createElement('div');
                userMessageDiv.className = 'message user-message';
                userMessageDiv.innerHTML = `<p>${message}</p>`;
                chatMessages.appendChild(userMessageDiv);

                // Clear input
                chatInput.value = '';

                // Auto scroll ke bawah
                chatMessages.scrollTop = chatMessages.scrollHeight;

                // Placeholder response bot (karena belum ada dataset)
                setTimeout(function() {
                    const botMessageDiv = document.createElement('div');
                    botMessageDiv.className = 'message bot-message';
                    botMessageDiv.innerHTML = `<p>Terima kasih atas pesannya! Fitur chatbot sedang dalam pengembangan. üòä</p>`;
                    chatMessages.appendChild(botMessageDiv);

                    // Auto scroll ke bawah
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }, 1000);
            }

            // Event listener untuk tombol kirim
            sendButton.addEventListener('click', sendMessage);

            // Event listener untuk enter key
            chatInput.addEventListener('keypress', function(event) {
                if (event.key === 'Enter') {
                    sendMessage();
                }
            });
        });
    </script>
</body>
</html>
